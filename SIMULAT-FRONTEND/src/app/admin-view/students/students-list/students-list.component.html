<!-- Button to Add a New Student -->
<button type="button" (click)="openModal()">Add New Student</button>

<!-- Students Table -->
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Email</th>
      <th>Given Name</th>
      <th>Last Name</th>
      <th>Gender</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let student of students">
      <td>{{ student.id }}</td>
      <td>{{ student.username }}</td>
      <td>{{ student.email }}</td>
      <td>{{ student.name_given }}</td>
      <td>{{ student.name_last }}</td>
      <td>{{ student.gender }}</td>
      <td>
        <button type="button" (click)="openModal(student)">Edit</button>
        <button type="button" (click)="deleteStudent(student.id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Modal -->
<div class="modal" *ngIf="isModalOpen">
  <div class="modal-content">
    <h2>{{ isEditing ? 'Edit Student' : 'Add New Student' }}</h2>
    <form (ngSubmit)="saveStudent()">
      <div class="form-group">
        <label for="studentId">Student ID</label>
        <input id="studentId" type="text" [(ngModel)]="modalStudent.id" name="studentId" placeholder="Enter Student ID" required />
      </div>
      
      <div class="form-group">
        <label for="givenName">Given Name</label>
        <input id="givenName" type="text" [(ngModel)]="modalStudent.name_given" name="givenName" placeholder="Enter Given Name" required />
      </div>

      <div class="form-group">
        <label for="surname">Surname</label>
        <input id="surname" type="text" [(ngModel)]="modalStudent.name_last" name="surname" placeholder="Enter Surname" required />
      </div>

      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input id="dob" type="date" [(ngModel)]="modalStudent.date_of_birth" name="dob" required />
      </div>

      <div class="form-group">
        <label for="gender">Gender</label>
        <select id="gender" [(ngModel)]="modalStudent.gender" name="gender" required>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" type="email" [(ngModel)]="modalStudent.email" name="email" placeholder="Enter Email" required />
      </div>

      <div class="form-group">
        <label for="username">Username</label>
        <input id="username" type="text" [(ngModel)]="modalStudent.username" name="username" placeholder="Enter Username" required />
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input id="password" type="password" [(ngModel)]="modalStudent.password" name="password" placeholder="Enter Password" required />
      </div>

      <div class="form-group">
        <label for="progressScore">Progress Score</label>
        <input id="progressScore" type="number" [(ngModel)]="modalStudent.progress_score" name="progressScore" placeholder="Enter Progress Score" min="0" max="100" />
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">{{ isEditing ? 'Update' : 'Add' }}</button>
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>
